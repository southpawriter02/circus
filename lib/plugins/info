#!/usr/bin/env bash

# ==============================================================================
#
# FILE:         info
#
# DESCRIPTION:  This command displays a summary of the system's hardware and
#               software configuration.
#
# ==============================================================================

# --- Setup ------------------------------------------------------------------
set -e

# --- Help and Usage ---------------------------------------------------------
usage() {
  echo "Usage: fc info"
  echo ""
  echo "Displays a summary of the system's configuration."
  echo ""
  exit 1
}

# --- Main Logic -------------------------------------------------------------
main() {
  if [ "$1" == "--help" ]; then
    usage
  fi

  echo "Gathering system information..."
  echo ""

  # --- Software Info ---
  echo "Software:"
  echo "  OS Version:   $(sw_vers -productName) $(sw_vers -productVersion) ($(sw_vers -buildVersion))"
  echo "  Hostname:     $(hostname)"
  echo "  Uptime:       $(uptime | awk -F, '{print $1}' | cut -d' ' -f 4-)"

  # --- Hardware Info ---
  echo ""
  echo "Hardware:"
  echo "  Model:        $(sysctl -n hw.model)"
  echo "  CPU:          $(sysctl -n machdep.cpu.brand_string)"
  
  # Get memory size in bytes and convert to GB
  local mem_bytes
  mem_bytes=$(sysctl -n hw.memsize)
  local mem_gb=$((mem_bytes / 1024 / 1024 / 1024))
  echo "  Memory:       ${mem_gb} GB"

}

main "$@"
