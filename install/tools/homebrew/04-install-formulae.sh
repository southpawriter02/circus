#!/usr/bin/env bash\n\n# ==============================================================================\n#\n# Homebrew Step 4: Install All Dependencies from Brewfile\n#\n# This script uses `brew bundle` to install all dependencies (taps, formulae,\n# casks, and fonts) defined in the main Brewfile. This is the primary\n# mechanism for installing software. It supports Dry Run mode.\n#\n# ==============================================================================\n\n#\n# The main logic for installing all Homebrew dependencies.\n#\nmain() {\n  msg_info \"Installing all dependencies from Brewfile...\"\n\n  local brewfile_path=\"$DOTFILES_DIR/etc/Brewfile\"\n\n  if [ ! -f \"$brewfile_path\" ]; then\n    msg_warning \"Brewfile not found at \'$brewfile_path\'. Skipping all Homebrew installations.\"\n    return 0\n  fi\n\n  if [ \"$DRY_RUN_MODE\" = true ]; then\n    msg_info \"[Dry Run] Checking Brewfile dependencies...\"\n    # The `check` command will list any missing dependencies without installing them.\n    # We add `|| true` because `check` exits with a non-zero status if items\n    # are missing, and we don\'t want `set -e` to halt the dry run.\n    brew bundle check --file=\"$brewfile_path\" || true\n  else\n    msg_info \"Running \`brew bundle install\`... This may take a while.\"\n    # The `brew bundle` command is idempotent and will only install missing items.\n    if brew bundle install --file=\"$brewfile_path\"; then\n      msg_success \"Brewfile dependencies installed successfully.\"\n    else\n      msg_error \"Brewfile installation failed. Please check the output above.\"\n    fi\n  fi\n}\n\n#\n# Execute the main function.\n#\nmain\n