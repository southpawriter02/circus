# Save New Documents to iCloud

Control whether new documents are saved to iCloud Drive or locally by default.

## Overview

| Property | Value |
|----------|-------|
| **Domain** | `NSGlobalDomain` |
| **Key** | `NSDocumentSaveNewDocumentsToCloud` |
| **Type** | Boolean |
| **Default Value** | `true` |
| **Our Setting** | `false` |

## Description

Controls the default save location when creating new documents in apps that support both iCloud and local storage. When enabled, the save dialog defaults to iCloud Drive, syncing documents across all your Apple devices. When disabled, new documents default to saving locally on your Mac. This is a system-wide preference affecting all compatible apps including Pages, Numbers, Keynote, TextEdit, and third-party apps supporting iCloud Documents.

## Values

| Value | Behavior |
|-------|----------|
| `true` | **iCloud default** (system default) â€” New documents save to iCloud Drive |
| `false` | **Local default** â€” New documents save to On My Mac |

## Visual Demonstration

### iCloud Default (true - System Default):
```
+-------------------------------------------------------------+
|  Save Dialog - iCloud Default                                |
+-------------------------------------------------------------+
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚  Save                                                   â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Save As: [Untitled                            ]        â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Tags:    [                                    ]        â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Where:   [â˜ï¸ iCloud Drive                      â–¼]      â”‚|
|  â”‚           â””â”€â”€ Default location                          â”‚|
|  â”‚                                                          â”‚|
|  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚|
|  â”‚  â”‚  ğŸ“ iCloud Drive                                    â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Desktop                                   â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Documents                                 â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Pages                                     â”‚â”‚|
|  â”‚  â”‚    â””â”€â”€ ğŸ“ Numbers                                   â”‚â”‚|
|  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚|
|  â”‚                                                          â”‚|
|  â”‚                         [Cancel]    [Save]              â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  âœ“ Syncs to all devices automatically                       |
|  âœ“ Accessible from iCloud.com                               |
|  âš ï¸ Requires internet for initial sync                       |
|  âš ï¸ Uses iCloud storage quota                                |
|                                                              |
+-------------------------------------------------------------+
```

### Local Default (false):
```
+-------------------------------------------------------------+
|  Save Dialog - Local Default                                 |
+-------------------------------------------------------------+
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚  Save                                                   â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Save As: [Untitled                            ]        â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Tags:    [                                    ]        â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Where:   [ğŸ’» On My Mac                         â–¼]      â”‚|
|  â”‚           â””â”€â”€ Default location                          â”‚|
|  â”‚                                                          â”‚|
|  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚|
|  â”‚  â”‚  ğŸ“ On My Mac                                       â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Desktop                                   â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Documents                                 â”‚â”‚|
|  â”‚  â”‚    â”œâ”€â”€ ğŸ“ Projects                                  â”‚â”‚|
|  â”‚  â”‚    â””â”€â”€ ğŸ“ Work                                      â”‚â”‚|
|  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚|
|  â”‚                                                          â”‚|
|  â”‚                         [Cancel]    [Save]              â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  âœ“ Always available (no internet needed)                    |
|  âœ“ Doesn't use iCloud storage                               |
|  âœ“ Full control over file location                          |
|  âš ï¸ Not synced to other devices                              |
|                                                              |
+-------------------------------------------------------------+
```

### Understanding the Locations:
```
+-------------------------------------------------------------+
|  iCloud vs Local Storage                                     |
+-------------------------------------------------------------+
|                                                              |
|  iCLOUD DRIVE:                                               |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  ~/Library/Mobile Documents/com~apple~CloudDocs/            |
|       â”‚                                                      |
|       â”œâ”€â”€ Desktop/    (if Desktop & Documents sync enabled) |
|       â”œâ”€â”€ Documents/  (if Desktop & Documents sync enabled) |
|       â”œâ”€â”€ Pages/      (Pages app documents)                 |
|       â”œâ”€â”€ Numbers/    (Numbers app documents)               |
|       â””â”€â”€ Keynote/    (Keynote app documents)               |
|                                                              |
|  â€¢ Syncs automatically across devices                        |
|  â€¢ Files may be "optimized" (download on demand)            |
|  â€¢ Counts against iCloud storage quota                       |
|                                                              |
|  ON MY MAC (Local):                                          |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  ~/Documents/                                                |
|  ~/Desktop/                                                  |
|  Any local folder                                            |
|                                                              |
|  â€¢ Always available locally                                  |
|  â€¢ No sync (unless backed up separately)                     |
|  â€¢ Uses only local disk space                                |
|                                                              |
+-------------------------------------------------------------+
```

### Multi-Device Workflow:
```
+-------------------------------------------------------------+
|  iCloud Document Sync                                        |
+-------------------------------------------------------------+
|                                                              |
|  WITH iCLOUD DEFAULT (true):                                 |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|     MacBook                    iPhone                        |
|    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                     |
|    â”‚ Create â”‚                â”‚        â”‚                     |
|    â”‚ doc in â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚ Access â”‚                     |
|    â”‚ Pages  â”‚    Sync via   â”‚  doc   â”‚                     |
|    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    iCloud     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     |
|                     â”‚                                        |
|                     â–¼                                        |
|                  iPad                                        |
|                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                    |
|                â”‚ Access â”‚                                    |
|                â”‚  doc   â”‚                                    |
|                â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    |
|                                                              |
|  WITH LOCAL DEFAULT (false):                                 |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|     MacBook                    iPhone                        |
|    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                     |
|    â”‚ Create â”‚                â”‚   âœ—    â”‚                     |
|    â”‚ doc in â”‚      âœ—        â”‚ No     â”‚                     |
|    â”‚ Pages  â”‚   No sync     â”‚ access â”‚                     |
|    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     |
|                                                              |
|    Must manually share via AirDrop, email, etc.             |
|    Or manually save to iCloud when needed                   |
|                                                              |
+-------------------------------------------------------------+
```

## Our Configuration

**Set to**: `false` â€” Default to local storage.

### Why Default to Local?

1. **Always available** â€” No internet dependency
2. **Privacy control** â€” Files stay on your machine
3. **No quota concerns** â€” Don't worry about iCloud space
4. **Faster access** â€” No download delay for files
5. **Deliberate sync** â€” Choose what to sync

### Why Default to iCloud?

- **Multi-device access** â€” Work from anywhere
- **Automatic backup** â€” Files safe in cloud
- **Collaboration** â€” Easy sharing via iCloud
- **Apple ecosystem** â€” Seamless with iPhone/iPad
- **Disaster recovery** â€” Protected from hardware failure

## Code Examples

```bash
# Read current value
defaults read NSGlobalDomain NSDocumentSaveNewDocumentsToCloud

# Default to local storage
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false

# Default to iCloud (system default)
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool true

# Delete (reset to default)
defaults delete NSGlobalDomain NSDocumentSaveNewDocumentsToCloud
```

## UI Location

**System Settings** > **Apple ID** > **iCloud** (or per-app settings)

```
+-------------------------------------------------------------+
|  System Settings - iCloud                                    |
+-------------------------------------------------------------+
|                                                              |
|  System Settings > Apple ID > iCloud Drive                  |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚                                                          â”‚|
|  â”‚  iCloud Drive                                [On â—]     â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Desktop & Documents Folders    [â—]                     â”‚|
|  â”‚  Store Desktop and Documents folders in iCloud Drive    â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Optimize Mac Storage           [â—]                     â”‚|
|  â”‚  Automatically remove downloaded files when space       â”‚|
|  â”‚  is needed on this Mac                                  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Apps syncing to iCloud Drive:                          â”‚|
|  â”‚  [âœ“] Pages                                              â”‚|
|  â”‚  [âœ“] Numbers                                            â”‚|
|  â”‚  [âœ“] Keynote                                            â”‚|
|  â”‚  [âœ“] TextEdit                                           â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  Note: The NSDocumentSaveNewDocumentsToCloud setting        |
|  is not directly exposed in System Settings UI.             |
|  It affects the default "Where" selection in save dialogs.  |
|                                                              |
+-------------------------------------------------------------+
```

## Related Settings

```bash
# Default save location (this setting)
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false

# Recent documents limit
defaults write NSGlobalDomain NSRecentDocumentsLimit -int 10

# Expanded save panel
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode2 -bool true

# Save panel sidebar width
defaults write NSGlobalDomain NSNavSidebarViewWidth -int 200
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Save dialog still defaults to iCloud | Log out and log back in, or restart Mac |
| Can't find local files | Check ~/Documents or search in Finder |
| iCloud not syncing | Check internet connection and iCloud status |
| Setting not persisting | Ensure full disk access for Terminal |
| Some apps ignore setting | App may have its own save location preference |
| Files disappeared | Check iCloud Drive if accidentally saved there |

## Compatibility

- **macOS**: 10.8+ (Mountain Lion) when iCloud Documents introduced
- **Note**: Affects all apps using standard document framework
- **Note**: Some apps have their own save location preferences
- **Note**: Log out/in may be required for change to take effect
- **Note**: Doesn't affect existing documents, only new ones

## Source File

**File**: [`defaults/system/global.sh`](../../../../../defaults/system/global.sh)

```bash
# NSDocumentSaveNewDocumentsToCloud controls default save location
# Domain: NSGlobalDomain
# Listed in undocumented settings in DOCUMENTATION-STATUS.md
# true = iCloud Drive, false = On My Mac
```

## References

- [Apple Support: Set up iCloud Drive](https://support.apple.com/guide/mac-help/set-up-icloud-features-mh36834/mac)
- [Apple Support: Store files in iCloud Drive on Mac](https://support.apple.com/guide/mac-help/store-files-in-icloud-drive-mchle1ebf3eb/mac)
- [Apple Support: Save documents on your Mac](https://support.apple.com/guide/mac-help/save-documents-mh15139/mac)
