# Mail Conversation View

Group related messages into threaded conversations.

## Overview

| Property | Value |
|----------|-------|
| **Domain** | `com.apple.mail` |
| **Keys** | `ConversationViewEnabled`, `ConversationViewAllMailboxes` |
| **Type** | Boolean |
| **Default Value** | `true`, `false` |
| **Our Setting** | `true`, `true` |

## Description

Conversation View groups related emails together in threads, showing all replies, forwards, and responses in a single expandable item. This makes following email discussions much easier than viewing individual messages.

## Values

| Key | Value | Behavior |
|-----|-------|----------|
| `ConversationViewEnabled` | `true` | Group messages into conversations |
| `ConversationViewEnabled` | `false` | Show individual messages |
| `ConversationViewAllMailboxes` | `true` | Include related messages from all mailboxes |
| `ConversationViewAllMailboxes` | `false` | Only messages in current mailbox |

## Visual Comparison

**Without Conversation View:**
```
ğŸ“¥ Inbox
â”œâ”€â”€ Re: Project Update (Sarah)
â”œâ”€â”€ Newsletter
â”œâ”€â”€ Re: Re: Project Update (John)
â”œâ”€â”€ Project Update (You)
â”œâ”€â”€ Fwd: Project Update (Mike)
```

**With Conversation View:**
```
ğŸ“¥ Inbox
â”œâ”€â”€ ğŸ’¬ Project Update (5 messages)
â”‚   â”œâ”€â”€ You: Initial message
â”‚   â”œâ”€â”€ Sarah: Re: Project Update
â”‚   â”œâ”€â”€ John: Re: Re: Project Update
â”‚   â””â”€â”€ Mike: Fwd: Project Update
â””â”€â”€ Newsletter
```

## Our Configuration

**ConversationViewEnabled**: `true` â€” Group conversations
**ConversationViewAllMailboxes**: `true` â€” Include from all mailboxes

### Why Enable Conversation View?

1. **Context** â€” See full discussion history
2. **Organization** â€” Fewer items to scan
3. **Efficiency** â€” Find related messages instantly
4. **Archiving** â€” Archive entire conversations at once
5. **Sent messages** â€” See your replies in context

### Why Include All Mailboxes?

When viewing inbox, also show:
- Your sent replies
- Messages you archived
- Messages in other folders

This provides complete conversation context.

## Code Examples

```bash
# Read current values
defaults read com.apple.mail ConversationViewEnabled
defaults read com.apple.mail ConversationViewAllMailboxes

# Enable conversation view (recommended)
defaults write com.apple.mail ConversationViewEnabled -bool true

# Include messages from all mailboxes
defaults write com.apple.mail ConversationViewAllMailboxes -bool true

# Disable conversation view
defaults write com.apple.mail ConversationViewEnabled -bool false

# Delete (reset to defaults)
defaults delete com.apple.mail ConversationViewEnabled
```

## UI Location

**View** menu â†’ â˜‘ **Organize by Conversation**
**View** menu â†’ â˜‘ **Include Related Messages**

Or in message list header, click the Organize button.

## Related View Settings

```bash
# Sort with newest message on top
defaults write com.apple.mail ConversationViewSortDescending -bool true

# Mark all messages as read when opening conversation
defaults write com.apple.mail ConversationViewMarkAllAsRead -bool false
```

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| âŒ˜K | Organize by Conversation toggle |
| â†’ | Expand conversation |
| â† | Collapse conversation |
| âŒ¥â†’ | Expand all conversations |
| âŒ¥â† | Collapse all conversations |

## Conversation in Classic Layout

In classic (three-column) layout:
- Left column: Mailbox list
- Middle column: Message list (conversations)
- Right column: Message preview

Conversations appear collapsed in the middle column.

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Conversations not grouping | Check subject lines match |
| Missing messages in thread | Enable "Include Related Messages" |
| Too many unrelated grouped | Disable ConversationViewAllMailboxes |

## How Threading Works

Mail groups by:
- Subject line similarity
- In-Reply-To header
- References header
- Message-ID relationships

Different subjects = different conversations.

## Compatibility

- **macOS**: All versions
- **Mail.app**: Native feature
- **Account types**: All email providers

## Source File

**File**: [`defaults/applications/mail.sh`](../../../../defaults/applications/mail.sh)

```bash
run_defaults "com.apple.mail" "ConversationViewEnabled" "-bool" "true"
run_defaults "com.apple.mail" "ConversationViewAllMailboxes" "-bool" "true"
```

## References

- [Apple Support: View email conversations](https://support.apple.com/guide/mail/view-conversations-mlhl276c9e96/mac)
