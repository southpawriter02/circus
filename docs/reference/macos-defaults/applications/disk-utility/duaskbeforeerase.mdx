# Disk Utility Ask Before Erase

Show confirmation dialog before erasing disks or volumes.

## Overview

| Property | Value |
|----------|-------|
| **Domain** | `com.apple.DiskUtility` |
| **Key** | `DUAskBeforeErase` |
| **Type** | Boolean |
| **Default Value** | `true` |
| **Our Setting** | `true` |

## Description

Controls whether Disk Utility displays a confirmation dialog before erasing disks, partitions, or volumes. This is a critical safety feature that prevents accidental data loss from misclicks or selecting the wrong drive. Erasing a disk is an irreversible operation that permanently destroys all data on the target volume.

## Values

| Value | Behavior |
|-------|----------|
| `true` | **Ask before erasing** (default) â€” Show confirmation dialog |
| `false` | **No confirmation** â€” Erase immediately without warning |

## Visual Demonstration

### With Confirmation Enabled (Recommended):
```
+-------------------------------------------------------------+
|  Disk Utility - Erase Confirmation Dialog                    |
+-------------------------------------------------------------+
|                                                              |
|  Step 1: Click Erase on a volume                             |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚  Disk Utility                                            â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚  [First Aid] [Partition] [Erase] [Mount] [Info]         â”‚|
|  â”‚                            â†‘                             â”‚|
|  â”‚                        Click Erase                       â”‚|
|  â”‚                                                          â”‚|
|  â”‚  Volume: External Drive                                  â”‚|
|  â”‚  Capacity: 1 TB                                          â”‚|
|  â”‚  Used: 750 GB                                            â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  Step 2: Confirmation dialog appears                         |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚                                                          â”‚|
|  â”‚    âš ï¸  Are you sure you want to erase                   â”‚|
|  â”‚        "External Drive"?                                 â”‚|
|  â”‚                                                          â”‚|
|  â”‚    Erasing "External Drive" will delete all data        â”‚|
|  â”‚    stored on it. This cannot be undone.                 â”‚|
|  â”‚                                                          â”‚|
|  â”‚    Name:    [External Drive          ]                  â”‚|
|  â”‚    Format:  [APFS                   â–¼]                  â”‚|
|  â”‚    Scheme:  [GUID Partition Map     â–¼]                  â”‚|
|  â”‚                                                          â”‚|
|  â”‚                         [Cancel]  [Erase]               â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  âœ“ User must confirm before data destruction               |
|  âœ“ Shows what will be erased                               |
|  âœ“ Opportunity to verify target drive                      |
|  âœ“ Can cancel if wrong drive selected                      |
|                                                              |
+-------------------------------------------------------------+
```

### The Danger of Disabling:
```
+-------------------------------------------------------------+
|  âš ï¸ WARNING: Without Confirmation                           |
+-------------------------------------------------------------+
|                                                              |
|  If DUAskBeforeErase = false:                               |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚                                                          â”‚|
|  â”‚  User clicks [Erase]                                    â”‚|
|  â”‚         â†“                                                â”‚|
|  â”‚  [DRIVE IMMEDIATELY ERASED!]                            â”‚|
|  â”‚         â†“                                                â”‚|
|  â”‚  ğŸ’€ ALL DATA GONE - NO RECOVERY                         â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  NIGHTMARE SCENARIOS:                                        |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  1. Selected wrong drive in sidebar                         |
|     â€¢ Intended: "Old USB Drive"                             |
|     â€¢ Actually: "Work Backup Drive"                         |
|     â€¢ Result: Years of work destroyed                       |
|                                                              |
|  2. Misclick on trackpad                                    |
|     â€¢ Accidentally clicked Erase                            |
|     â€¢ No chance to cancel                                   |
|     â€¢ Instant data loss                                     |
|                                                              |
|  3. Similar drive names                                      |
|     â€¢ "Backup" vs "Backup 1"                                |
|     â€¢ Easy to confuse                                       |
|     â€¢ No warning to verify                                  |
|                                                              |
|  âœ— NO CONFIRMATION = NO SAFETY NET                         |
|                                                              |
+-------------------------------------------------------------+
```

### What Erase Actually Does:
```
+-------------------------------------------------------------+
|  Understanding Disk Erase Operations                         |
+-------------------------------------------------------------+
|                                                              |
|  QUICK ERASE (Default):                                      |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|  â€¢ Removes file system metadata                             |
|  â€¢ Marks all space as "available"                           |
|  â€¢ Data technically remains (recovery possible)             |
|  â€¢ Very fast (seconds)                                      |
|                                                              |
|  SECURE ERASE (Security Options):                            |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|  â€¢ Overwrites actual data on disk                           |
|  â€¢ Multiple passes available (1, 3, or 7 passes)            |
|  â€¢ Data unrecoverable                                       |
|  â€¢ Much slower (hours for large drives)                     |
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚                                                          â”‚|
|  â”‚  Erase Dialog - Security Options                         â”‚|
|  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚|
|  â”‚                                                          â”‚|
|  â”‚  [Security Options...]                                   â”‚|
|  â”‚                                                          â”‚|
|  â”‚  â”œâ”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚|
|  â”‚  Fastest                              Most Secure        â”‚|
|  â”‚                                                          â”‚|
|  â”‚  â€¢ Fastest: Don't overwrite data                        â”‚|
|  â”‚  â€¢ Middle: 1-pass overwrite                             â”‚|
|  â”‚  â€¢ Secure: 7-pass overwrite (DoD standard)              â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  Note: SSDs don't support traditional secure erase.         |
|  Use FileVault encryption for SSD security.                 |
|                                                              |
+-------------------------------------------------------------+
```

## Our Configuration

**Set to**: `true` â€” Always confirm before erasing for safety.

### Why Enable Confirmation (Critical)?

1. **Irreversible action** â€” Erased data is essentially gone
2. **Multiple drives** â€” Easy to select wrong one
3. **High stakes** â€” Could destroy critical backups
4. **No undo** â€” Unlike deleting files, no Trash recovery
5. **Industry standard** â€” All professional tools require confirmation

### Why Would Anyone Disable This?

- Automating disk preparation workflows
- IT departments imaging many drives
- Testing environments with disposable data
- Scripts that handle confirmation differently
- **NOT recommended for regular use**

## Code Examples

```bash
# Read current value
defaults read com.apple.DiskUtility DUAskBeforeErase

# Enable erase confirmation (recommended)
defaults write com.apple.DiskUtility DUAskBeforeErase -bool true

# Disable erase confirmation (DANGEROUS)
defaults write com.apple.DiskUtility DUAskBeforeErase -bool false

# Delete (reset to default - which is true)
defaults delete com.apple.DiskUtility DUAskBeforeErase
```

## UI Location

The confirmation appears whenever you click the Erase button in Disk Utility.

```
+-------------------------------------------------------------+
|  Disk Utility Toolbar                                        |
+-------------------------------------------------------------+
|                                                              |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”|
|  â”‚                                                          â”‚|
|  â”‚  [First Aid]  [Partition]  [Erase]  [Mount]  [Info]     â”‚|
|  â”‚                              â†‘                           â”‚|
|  â”‚                         This button                      â”‚|
|  â”‚                         triggers the                     â”‚|
|  â”‚                         confirmation                     â”‚|
|  â”‚                                                          â”‚|
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜|
|                                                              |
|  Also accessible via:                                        |
|  â€¢ Edit menu > Erase                                        |
|  â€¢ Right-click volume > Erase                               |
|                                                              |
+-------------------------------------------------------------+
```

## Recovery Options After Accidental Erase

```
+-------------------------------------------------------------+
|  If You Accidentally Erased a Drive                          |
+-------------------------------------------------------------+
|                                                              |
|  âš ï¸ ACT FAST - Don't write new data to the drive!          |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  IMMEDIATE STEPS:                                            |
|  1. DO NOT use the drive                                    |
|  2. Disconnect it immediately                               |
|  3. Don't try to "fix" it yourself                          |
|                                                              |
|  RECOVERY OPTIONS:                                           |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  Option 1: Time Machine                                      |
|  â€¢ If the erased drive was backed up                        |
|  â€¢ Restore from most recent backup                          |
|                                                              |
|  Option 2: Data Recovery Software                            |
|  â€¢ Disk Drill, Data Rescue, R-Studio                        |
|  â€¢ May recover files from quick-erased drives               |
|  â€¢ Less effective on SSDs                                   |
|                                                              |
|  Option 3: Professional Recovery                             |
|  â€¢ DriveSavers, Ontrack, etc.                               |
|  â€¢ Expensive ($500-$2000+)                                  |
|  â€¢ Best chance for critical data                            |
|                                                              |
|  PREVENTION IS BETTER:                                       |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|  â€¢ Keep DUAskBeforeErase enabled                            |
|  â€¢ Always verify target drive                               |
|  â€¢ Maintain regular backups                                 |
|  â€¢ Use descriptive drive names                              |
|                                                              |
+-------------------------------------------------------------+
```

## Related Settings

```bash
# Ask before erase (this setting)
defaults write com.apple.DiskUtility DUAskBeforeErase -bool true

# Show all devices in sidebar
defaults write com.apple.DiskUtility SidebarShowAllDevices -bool true

# Show APFS snapshots
defaults write com.apple.DiskUtility DUShowAPFSSnapshots -bool true

# Enable debug menu
defaults write com.apple.DiskUtility DUDebugMenuEnabled -bool true

# Advanced image options
defaults write com.apple.DiskUtility advanced-image-options -bool true
```

## Best Practices for Safe Disk Operations

```
+-------------------------------------------------------------+
|  Disk Utility Safety Checklist                               |
+-------------------------------------------------------------+
|                                                              |
|  BEFORE ERASING ANY DRIVE:                                   |
|  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
|                                                              |
|  â˜ Verify you selected the correct drive                    |
|      â€¢ Check capacity matches expected                      |
|      â€¢ Check drive name is correct                          |
|      â€¢ Use "Show All Devices" for clarity                   |
|                                                              |
|  â˜ Confirm backup exists                                    |
|      â€¢ Time Machine backup current?                         |
|      â€¢ Other backup of this data?                           |
|      â€¢ Can you afford to lose this data?                    |
|                                                              |
|  â˜ Disconnect drives you're NOT erasing                     |
|      â€¢ Removes them from possibility                        |
|      â€¢ Can't accidentally erase the wrong one               |
|                                                              |
|  â˜ Double-check in confirmation dialog                      |
|      â€¢ Read the drive name carefully                        |
|      â€¢ Verify capacity shown                                |
|      â€¢ Don't rush - take a moment                           |
|                                                              |
|  â˜ Consider physical labels                                 |
|      â€¢ Label external drives clearly                        |
|      â€¢ "BACKUP - DO NOT ERASE"                              |
|                                                              |
+-------------------------------------------------------------+
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Confirmation not appearing | Check DUAskBeforeErase setting is true |
| Erase button grayed out | Volume may be in use; unmount first |
| Can't erase startup disk | Boot from Recovery (âŒ˜R at startup) |
| Erase fails with error | Try First Aid first; check disk health |
| Want to erase SSD securely | Use FileVault before erase; SSDs handle differently |

## Compatibility

- **Disk Utility**: macOS 10.11+ (El Capitan)
- **Note**: Setting applies to all erase operations
- **Note**: Affects both volumes and entire disks
- **Note**: Also affects disk image creation (erase then create)
- **Note**: Command-line `diskutil` has separate confirmation behavior

## Source File

**File**: [`defaults/applications/disk_utility.sh`](../../../../../defaults/applications/disk_utility.sh)

```bash
run_defaults "com.apple.DiskUtility" "DUAskBeforeErase" "-bool" "true"
```

## References

- [Apple Support: Disk Utility User Guide](https://support.apple.com/guide/disk-utility/welcome/mac)
- [Apple Support: Erase and reformat a storage device](https://support.apple.com/guide/disk-utility/erase-and-reformat-a-storage-device-dskutl14079/mac)
- [Apple Support: How to erase a disk for Mac](https://support.apple.com/en-us/HT208496)
