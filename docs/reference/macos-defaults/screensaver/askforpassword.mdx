# askForPassword

Require password after screen saver begins or display turns off.

## Overview

| Property | Value |
|----------|-------|
| **Domain** | `com.apple.screensaver` |
| **Key** | `askForPassword` |
| **Type** | Integer (Boolean-like) |
| **Default Value** | `0` |
| **Our Setting** | `1` |
| **Requires Restart** | None (immediate) |

## Description

Controls whether a password is required to unlock your Mac after the screen saver activates or the display goes to sleep. This is one of the most critical security settings on macOS, preventing unauthorized physical access to an unattended computer.

When enabled, waking the Mac requires authentication via:
- Login password
- Touch ID (if available)
- Apple Watch (if configured)

## Values

| Value | Behavior |
|-------|----------|
| `1` | **Password required** — Must authenticate to unlock after screen saver or sleep |
| `0` | **No password** (default) — Anyone can wake and access the Mac |

## Default Behavior

**Apple's default**: `0` (no password required)

By default, macOS does NOT require a password after the screen saver starts. This prioritizes convenience over security but leaves your Mac vulnerable to unauthorized access.

> ⚠️ **Security Warning**: Leaving this disabled allows anyone with physical access to your Mac to use it without authentication.

## Our Configuration

**Set to**: `1`

**Rationale**: This is an essential security setting. Any Mac used in:
- Public spaces (coffee shops, libraries, airports)
- Shared offices
- Home environments with others present
- Containing sensitive data

...should require a password after screen saver/sleep.

## Code Examples

### Read Current Value

```bash
# Check current setting
defaults read com.apple.screensaver askForPassword
```

### Enable (Require Password)

```bash
# Require password after screen saver/sleep
defaults write com.apple.screensaver askForPassword -int 1

# No restart needed—takes effect immediately
```

### Disable (No Password Required)

```bash
# Don't require password (not recommended!)
defaults write com.apple.screensaver askForPassword -int 0
```

### Delete (Reset to System Default)

```bash
# Remove custom setting
defaults delete com.apple.screensaver askForPassword
```

## Related Setting: Password Delay

The `askForPasswordDelay` setting controls the grace period before the password is required:

```bash
# Require password immediately (0 seconds of grace period)
defaults write com.apple.screensaver askForPasswordDelay -int 0

# Allow 5 seconds before requiring password
defaults write com.apple.screensaver askForPasswordDelay -int 5

# Allow 5 minutes (useful for presentations)
defaults write com.apple.screensaver askForPasswordDelay -int 300
```

| Delay Value | Behavior |
|-------------|----------|
| `0` | **Immediate** — Password required the instant screen locks |
| `5` | Apple's default — 5 second grace period |
| `60` | 1 minute grace period |
| `300` | 5 minute grace period |

**Our setting**: `0` (immediate, maximum security)

## UI Location

**System Settings** → **Lock Screen** → **Require password after screen saver begins or display is turned off**

The UI shows a dropdown menu with time options:
- Immediately
- After 5 seconds
- After 1 minute
- After 5 minutes
- After 15 minutes
- After 1 hour
- After 4 hours

Selecting "Immediately" sets both:
- `askForPassword` = `1`
- `askForPasswordDelay` = `0`

## Security Considerations

### Recommended Security Configuration

```bash
# Maximum security: require password immediately
defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0

# Also set a short screen saver timeout
defaults write com.apple.screensaver idleTime -int 300  # 5 minutes
```

### When to Allow a Delay

A short delay (5-60 seconds) can be acceptable for:
- Home desktop computers with no at-risk data
- Testing/development machines during active debugging

### Lock Screen Keyboard Shortcut

Even with auto-lock configured, you can manually lock immediately:

**⌃⌘Q** (Control + Command + Q) — Lock screen now

Or configure a Hot Corner in System Settings → Desktop & Dock → Hot Corners.

## Interaction with Other Features

### Touch ID

When `askForPassword` is enabled, Touch ID provides a faster unlock experience than typing a password.

### Apple Watch Unlock

If "Unlock with Apple Watch" is enabled, your watch can unlock the Mac when:
- `askForPassword` is enabled
- You're wearing the watch
- You're near the Mac

### FileVault

If FileVault is enabled, the password is ALWAYS required on:
- System restart
- Wake from hibernation (lid closed for extended time)

This works independently of `askForPassword`.

## Compatibility

| macOS Version | Supported |
|---------------|-----------|
| macOS 15 (Sequoia) | ✅ |
| macOS 14 (Sonoma) | ✅ |
| macOS 13 (Ventura) | ✅ |
| macOS 12 (Monterey) | ✅ |
| macOS 11 (Big Sur) | ✅ |
| macOS 10.7 (Lion) and later | ✅ |

## Troubleshooting

### Password Not Being Required

1. Verify the setting is enabled:
   ```bash
   defaults read com.apple.screensaver askForPassword
   # Should return 1
   ```

2. Check the delay isn't too long:
   ```bash
   defaults read com.apple.screensaver askForPasswordDelay
   # Should return a small number (0-5 for security)
   ```

3. Ensure screen saver is actually activating—check `idleTime`

### Password Required Too Soon

Increase the delay period:
```bash
# Set 1 minute delay
defaults write com.apple.screensaver askForPasswordDelay -int 60
```

## References

- [Apple Support: Require a password after waking your Mac](https://support.apple.com/guide/mac-help/require-a-password-after-waking-your-mac-mchlp2270/mac)
- [Apple Support: Change Lock Screen settings](https://support.apple.com/guide/mac-help/change-lock-screen-settings-mchl8a3b1a59/mac)
- [Apple Support: Protect your Mac from malware](https://support.apple.com/guide/mac-help/protect-your-mac-from-malware-mh40596/mac)

## Source File

This setting is configured in the circus dotfiles repository:

**File**: [`defaults/system/screensaver.sh`](../../../defaults/system/screensaver.sh)

```bash
# --- Require Password After Sleep or Screen Saver ---
# Key:          askForPassword
# Description:  Controls whether a password is required to exit the screensaver
#               or wake the display from sleep. This is a critical security
#               setting that prevents unauthorized access to an unattended Mac.
# Default:      0 (disabled - no password required to wake)
# Options:      0 = Disabled (no authentication required to unlock)
#               1 = Enabled (password/Touch ID required to unlock)
# Set to:       1 (require password for security)
# UI Location:  System Settings > Lock Screen > Require password after screen
#               saver begins or display is turned off
# Source:       https://support.apple.com/guide/mac-help/require-a-password-after-waking-your-mac-mchlp2270/mac
# Security:     Essential for protecting data on shared or portable Macs.
run_defaults "com.apple.screensaver" "askForPassword" "-int" "1"
```
